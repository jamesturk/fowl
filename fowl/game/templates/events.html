{% extends "base.html" %}
{% load static %}
{% block title %} Events {% endblock %}

{% block content %}
<header class="jumbotron subhead" id="overview">
<h1>Events</h1>
<p class="lead">Every event that has taken place on RAW, Smackdown, and on
PPVs, since the creation of this league.</p>
</header>

<h2>Events List:</h2>
<p>Yup, here are those events, collapsed in a nice way, click for
match details:</p>

<div class="accordion" id="accordion">

{% regroup points by match.event as event_list %}
{% for event in event_list %}

<div class="accordion-group">
    <div class="accordion-heading">
        <a class="accordion-toggle event-title" data-toggle="collapse"
            data-parent="#accordion" href="#event-{{event.grouper.id}}">
            {{event.grouper.name}} - {{event.grouper.date}}
        </a>
    </div>

    <div id="event-{{event.grouper.id}}" class="accordion-body collapse in">
    <div class="accordion-inner">
    <table class="table">
        <thead>
          <tr>
            <th>Event</th>
            <th>Scoring</th>
          </tr>
        </thead>
        <tbody>
        {% regroup event.list by match as match_list %}
        {% for match in match_list %}
        <tr>
            <td>{{match.grouper}}</td>
            <td>
                <ul>
                    {% for tp in match.list %}
                    {% if tp.points %}
                    <li> {{tp.team}} received {{tp.points}}
                        point{{tp.points|pluralize}} for {{tp.star}}
                    </li>
                    {% endif %}
                    {% endfor %}
                </ul>
            </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    </div>
    </div>
</div>

{% endfor %}
</div>
{% endblock %}
